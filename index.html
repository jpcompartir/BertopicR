<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Convenience wrapper for extracting bertopic topic models in R, using reticulate to interact with Python libraries and objects from the comfort of RStudio.">
<title>Wraps bertopic through reticulate • BertopicR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Wraps bertopic through reticulate">
<meta property="og:description" content="Convenience wrapper for extracting bertopic topic models in R, using reticulate to interact with Python libraries and objects from the comfort of RStudio.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">BertopicR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/modular_approach.html">Interacting with Individual Modules</a>
    <a class="dropdown-item" href="articles/manipulating-the-model.html">Manipulating the Model</a>
    <a class="dropdown-item" href="articles/quick_start.html">Topic Modelling without Optimisation</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jpcompartir/BertopicR" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bertopicr">BertopicR<a class="anchor" aria-label="anchor" href="#bertopicr"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of BertopicR is to allow R users to access bertopic’s topic modelling suite in R via Reticulate. Bertopic was written and developed by Maarten Grootendorst (and other contributors!).</p>
<p>The package does not aim to implement every feature of bertopic, and is designed with specific end users in mind who may not be experienced programmers or developers. You may submit issues for feature requests; however, it may be faster to go direct to the original, Python library which has excellent documentation. [<a href="https://maartengr.github.io/BERTopic/index.html" class="external-link">BERTopic documentation</a>]</p>
<p>We have tried to stay true to the Python library, whilst developing a package which has an ‘R feel’ i.e. uses functions more than OOP. In places we have changed the names of arguments, for example in the Python library BERTopic() takes <code>hdbscan_model = x</code>, but we have opted for <code>clustering_model = x</code>. The reason for this is that <code>hdbscan_model =</code> is an artifact from the early days of bertopic and the author wants to ensure code is backwards compatible, but if the package were being developed now it’s likely the author would opt for <code>clustering_model =</code>. There are other such changes to be aware of.</p>
<p>The package currently installs an exact version of bertopic - 0.15.0, features introduced after this version will take time to, or may never, reach this package.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Before installing bertopic make sure that you have miniconda installed, if you don’t:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span> <span class="co">#install.packages("reticulate") if you don't have this already or aren't sure how to install.</span></span>
<span></span>
<span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/install_miniconda.html" class="external-link">install_miniconda</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Once you have reticulate and miniconda installed, you can then install the development version of BertopicR from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jpcompartir/BertopicR"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jpcompartir.github.io/BertopicR/" class="external-link">BertopicR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Check your environment has been loaded correctly and bertopic has been installed:</span></span>
<span><span class="fu">BertopicR</span><span class="fu">::</span><span class="fu"><a href="reference/check_python_dependencies.html">check_python_dependencies</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you receive the message: “bertopic not in installed packages of current environment…” run:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BertopicR</span><span class="fu">::</span><span class="fu"><a href="reference/install_python_dependencies.html">install_python_dependencies</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quickstart">Quickstart<a class="anchor" aria-label="anchor" href="#quickstart"></a>
</h2>
<p>BertopicR ships with a dataset of unstructured text data <code>bert_example_data</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">BertopicR</span><span class="fu">::</span><span class="va"><a href="reference/bert_example_data.html">bert_example_data</a></span></span>
<span></span>
<span><span class="va">embedder</span> <span class="op">&lt;-</span> <span class="fu">bt_make_embedder</span><span class="op">(</span><span class="st">"all-minilm-l6-v2"</span><span class="op">)</span></span>
<span><span class="va">embeddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bt_do_embedding.html">bt_do_embedding</a></span><span class="op">(</span><span class="va">embedder</span>, documents <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">message</span>,  batch_size <span class="op">=</span> <span class="fl">16L</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Embedding proccess finished</span></span>
<span><span class="co">#&gt; all-minilm-l6-v2 added to embeddings attributes</span></span>
<span></span>
<span></span>
<span><span class="va">reducer</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bt_make_reducer_umap.html">bt_make_reducer_umap</a></span><span class="op">(</span>n_neighbours <span class="op">=</span> <span class="fl">10L</span>, n_components <span class="op">=</span> <span class="fl">10L</span>, metric <span class="op">=</span> <span class="st">"cosine"</span><span class="op">)</span></span>
<span><span class="va">clusterer</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bt_make_clusterer_hdbscan.html">bt_make_clusterer_hdbscan</a></span><span class="op">(</span>min_cluster_size <span class="op">=</span> <span class="fl">20L</span>, metric <span class="op">=</span> <span class="st">"euclidean"</span>, cluster_selection_method <span class="op">=</span> <span class="st">"eom"</span>, min_samples <span class="op">=</span> <span class="fl">10L</span><span class="op">)</span></span>
<span></span>
<span><span class="va">topic_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bt_compile_model.html">bt_compile_model</a></span><span class="op">(</span>embedding_model <span class="op">=</span> <span class="va">embedder</span>,</span>
<span>                                reduction_model <span class="op">=</span> <span class="va">reducer</span>,</span>
<span>                                clustering_model <span class="op">=</span> <span class="va">clusterer</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; No vectorising model provided, creating model with default parameters</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; No ctfidf model provided, creating model with default parameters</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model built</span></span>
<span></span>
<span><span class="co">#Fit the model</span></span>
<span><span class="va">fitted_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bt_fit_model.html">bt_fit_model</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">topic_model</span>, </span>
<span>                             documents <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">message</span>, </span>
<span>                             embeddings <span class="op">=</span> <span class="va">embeddings</span><span class="op">)</span></span>
<span><span class="co">#&gt; UMAP(angular_rp_forest=True, low_memory=False, metric='cosine', min_dist=0.0, n_components=10, n_neighbors=10, random_state=42, verbose=True)</span></span>
<span><span class="co">#&gt; Fri Sep 15 12:58:15 2023 Construct fuzzy simplicial set</span></span>
<span><span class="co">#&gt; Fri Sep 15 12:58:27 2023 Finding Nearest Neighbors</span></span>
<span><span class="co">#&gt; Fri Sep 15 12:58:29 2023 Finished Nearest Neighbor Search</span></span>
<span><span class="co">#&gt; Fri Sep 15 12:58:31 2023 Construct embedding</span></span>
<span><span class="co">#&gt; Fri Sep 15 12:58:37 2023 Finished embedding</span></span>
<span></span>
<span><span class="va">fitted_model</span><span class="op">$</span><span class="fu">get_topic_info</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 36 × 5</span></span>
<span><span class="co">#&gt;    Topic Count Name                           Representation Representative_Docs</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                          &lt;list&gt;         &lt;list&gt;             </span></span>
<span><span class="co">#&gt;  1    -1  1750 -1_hispanicheritagemonth_mont… &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  2     0   278 0_beto_trump_vote_fake         &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  3     1   238 1_night_heritage night_herita… &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  4     2   168 2_dance_salsa_music_tito       &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  5     3   150 3_heritage month_month_octobe… &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  6     4   126 4_students_school_grade_proje… &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  7     5   109 5_latinx_latina_uber_latinas   &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  8     6    94 6_mdcps_mdcpscentral_celebrat… &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt;  9     7    90 7_good thread_thread_yup_yes   &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt; 10     8    90 8_hispanicheritagemonth hispa… &lt;chr [10]&gt;     &lt;chr [3]&gt;          </span></span>
<span><span class="co">#&gt; # ℹ 26 more rows</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="error-messages-and-causes">Error Messages and causes<a class="anchor" aria-label="anchor" href="#error-messages-and-causes"></a>
</h2>
<p>We have tried to provide informative error messages but sometimes you may be faced with error messages that have arisen from the parent python function used. If you get an error that begins with “Error in py_call_impl(callable, call_args$unnamed, call_args$named) :”, you can use reticulate::py_last_error() to trace the origin of the error message.</p>
<p>Note that one common cause of error messages when working with python functions in R arises when the user fails to specify integer numbers as integer type. In R, integers are of type “numeric” by default, python functions typically require them to be explicitly specified as integer type. For any formal function arguments, this conversion is dealt with within in the function, however you should be aware of this if specifying extra arguments to any function. In R, this is achieved by placing an L after the number or using the as.integer() function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># numbers default to "numeric"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "numeric"</span></span>
<span></span>
<span><span class="co"># we can force them to be "integer"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="fl">4L</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "integer"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "integer"</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jpcompartir/BertopicR" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jpcompartir/BertopicR/issues" class="external-link">Report an issue</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BertopicR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jack Penzer <br><small class="roles"> Maintainer </small>  </li>
<li>Aoife Ryan <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/jpcompartir/BertopicR/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/jpcompartir/BertopicR/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/jpcompartir/BertopicR/actions/workflows/pkgdown.yaml" class="external-link"><img src="https://github.com/jpcompartir/BertopicR/actions/workflows/pkgdown.yaml/badge.svg" alt="pkgdown"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jack Penzer, Aoife Ryan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
